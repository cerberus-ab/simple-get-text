/*! Simple gettext tool - v0.3 - 2016; Licensed MIT */
!function(root,factory){if(typeof define=="function"&&define.amd){define([],function(){return factory()})}else if(typeof exports!="undefined"){exports=module.exports=factory()}else{root.GetText=factory()}}(this,function(){"use strict";var objectAssign=typeof Object.assign!="function"?function(target){if(target===undefined||target===null){throw new TypeError("Cannot convert undefined or null to object")}var output=Object(target);for(var index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&source!==null){for(var nextKey in source){if(source.hasOwnProperty(nextKey)){output[nextKey]=source[nextKey]}}}}return output}:Object.assign;function GetText(dictionaries){if(typeof dictionaries!="object"||dictionaries===null){throw new TypeError("the used dictionaries set is invalid")}this._dictionaries=dictionaries}GetText.prototype.useLocale=function(locale,options){if(typeof this._dictionaries[locale]=="undefined"){throw new ReferenceError(locale+" is unknown dictionary")}return new Getter(this._dictionaries[locale],objectAssign({},options||{},{locale:locale}))};function Getter(dictionary,options){this._options=objectAssign({locale:"en",placeholder:"!UNDEFINED TEXT!",silent:false},options||{});if(!Getter._isDictionary(dictionary)){throw new TypeError("the used dictionary is invalid")}this._dictionary=dictionary;this._cache={};this.lasterr=null}Getter._isDictionary=function(dictionary){return typeof dictionary=="object"&&dictionary!==null};Getter.prototype._error=function(message,silent){this.lasterr=this._options.locale+": "+message;if(!this._options.silent&&!silent){console.warn(this.lasterr)}};Getter.prototype._replace=function(string,args){return string.replace(/({\s*(\w+)\s*})/g,function(match,p1,p2){return args[p2]})};Getter.prototype.get=function(key,args,silent){if(arguments.length==2){args=typeof arguments[1]=="object"?arguments[1]:null;silent=typeof arguments[1]!="object"?Boolean(arguments[1]):false}var string=this._dictionary[key];this.lasterr=null;if(typeof string=="undefined"||typeof string=="object"){this._error(key+" is invalid property key",silent);string=this._options.placeholder}else if(typeof args=="object"&&args!==null){string=this._replace(string,args)}return this._cache[key]=string};Getter.prototype.use=function(context){var that=this;return function(){var args=Array.prototype.slice.call(arguments);args[0]=context+args[0];return that.get.apply(that,args)}};Getter.prototype.merge=function(dictionary){if(!Getter._isDictionary(dictionary)){throw new TypeError("the used dictionary is invalid")}this._dictionary=objectAssign(this._dictionary,dictionary);return this};Getter.prototype.getLocale=function(){return this._options.locale};Getter.prototype.getCache=function(){return this._cache};return GetText});
